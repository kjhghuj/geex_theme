{%- comment -%}
  搜索结果页面模板
  包含搜索表单、结果展示和筛选功能
{%- endcomment -%}

{{ 'search.css' | asset_url | stylesheet_tag }}

<div class="search-page" data-search-page>
  <!-- 搜索头部 -->
  <div class="search-header">
    <div class="container">
      <div class="search-header__content">
        <h1 class="search-title">搜索结果</h1>

        <!-- 搜索表单 -->
        <form class="search-form" action="/search" method="get" role="search" data-search-form>
          <div class="search-input-wrapper">
            <input type="text"
                   name="q"
                   value="{{ search.terms | escape }}"
                   placeholder="搜索产品、收藏或文章..."
                   class="search-input"
                   id="SearchInput"
                   autocomplete="off"
                   data-search-input
                   aria-label="搜索">
            <button type="submit" class="search-submit" aria-label="搜索">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M8 2a6 6 0 100 12A6 6 0 008 2zm0 2a4 4 0 110 8 4 4 0 010-8zm8 14l-4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <button type="button" class="search-clear" data-search-clear aria-label="清除搜索">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 6l4 4M12 6l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>

          <div class="search-options">
            <div class="search-type">
              <label class="search-type__label">搜索类型:</label>
              <select name="type" class="search-type__select" data-search-type>
                <option value="">所有</option>
                <option value="product" {% if search.types contains 'product' %}selected{% endif %}>产品</option>
                <option value="article" {% if search.types contains 'article' %}selected{% endif %}>文章</option>
                <option value="page" {% if search.types contains 'page' %}selected{% endif %}>页面</option>
                <option value="collection" {% if search.types contains 'collection' %}selected{% endif %}>收藏</option>
              </select>
            </div>

            <div class="search-suggestions" data-search-suggestions style="display: none;">
              <h4 class="suggestions-title">搜索建议</h4>
              <ul class="suggestions-list" data-suggestions-list></ul>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 搜索结果信息 -->
  {%- if search.performed -%}
    <div class="search-info">
      <div class="container">
        <div class="search-info__content">
          <p class="search-results-text">
            {%- if search.results_count > 0 -%}
              找到 <strong>{{ search.results_count }}</strong> 个结果
              {%- if search.terms -%}
                关于 "<strong>{{ search.terms | escape }}</strong>"
              {%- endif -%}
              {%- if search.types.size > 0 -%}
                在
                {%- for type in search.types -%}
                  {%- case type -%}
                    {%- when 'product' -%}产品
                    {%- when 'article' -%}文章
                    {%- when 'page' -%}页面
                    {%- when 'collection' -%}收藏
                  {%- endcase -%}
                  {%- unless forloop.last -%}、{%- endunless -%}
                {%- endfor -%}
              {%- endif -%}
            {%- else -%}
              {%- if search.terms -%}
                没有找到关于 "<strong>{{ search.terms | escape }}</strong>" 的结果
              {%- else -%}
                请输入搜索关键词
              {%- endif -%}
            {%- endif -%}
          </p>

          {%- if search.results_count > 0 -%}
            <div class="search-toolbar">
              <div class="toolbar-left">
                <!-- 搜索排序 -->
                <div class="search-sort">
                  <label class="toolbar-label" for="SortBy">排序:</label>
                  <select name="sort_by" id="SortBy" class="sort-select" data-sort-select>
                    <option value="relevance" {% if search.sort_by == 'relevance' %}selected{% endif %}>相关度</option>
                    <option value="price-ascending" {% if search.sort_by == 'price-ascending' %}selected{% endif %}>价格从低到高</option>
                    <option value="price-descending" {% if search.sort_by == 'price-descending' %}selected{% endif %}>价格从高到低</option>
                    <option value="created-descending" {% if search.sort_by == 'created-descending' %}selected{% endif %}>最新</option>
                    <option value="created-ascending" {% if search.sort_by == 'created-ascending' %}selected{% endif %}>最旧</option>
                    <option value="title-ascending" {% if search.sort_by == 'title-ascending' %}selected{% endif %}>标题 A-Z</option>
                    <option value="title-descending" {% if search.sort_by == 'title-descending' %}selected{% endif %}>标题 Z-A</option>
                  </select>
                </div>
              </div>

              <div class="toolbar-right">
                <!-- 每页显示数量 -->
                <div class="search-per-page">
                  <label class="toolbar-label" for="per-page">显示:</label>
                  <select name="per_page" id="per-page" class="per-page-select" data-per-page-select>
                    <option value="12" {% if current_per_page == 12 %}selected{% endif %}>12</option>
                    <option value="24" {% if current_per_page == 24 %}selected{% endif %}>24</option>
                    <option value="36" {% if current_per_page == 36 %}selected{% endif %}>36</option>
                    <option value="48" {% if current_per_page == 48 %}selected{% endif %}>48</option>
                  </select>
                </div>
              </div>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  {%- endif -%}

  <!-- 搜索结果 -->
  <div class="search-content">
    <div class="container">
      {%- if search.performed -%}
        {%- if search.results_count == 0 -%}
          <!-- 无结果状态 -->
          <div class="search-empty">
            <div class="empty-content">
              <div class="empty-icon">
                <svg width="80" height="80" viewBox="0 0 80 80" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="30" cy="30" r="18"/>
                  <path d="M44 44l16 16"/>
                  <path d="M60 20h10M65 15v10"/>
                </svg>
              </div>
              <h3 class="empty-title">没有找到结果</h3>
              <p class="empty-description">
                我们没有找到与 "<strong>{{ search.terms | escape }}</strong>" 匹配的结果。
                尝试使用不同的关键词或浏览我们的产品收藏。
              </p>
              <div class="empty-actions">
                <a href="/collections/all" class="btn btn-primary">
                  浏览所有产品
                </a>
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('SearchInput').focus()">
                  重新搜索
                </button>
              </div>

              <!-- 搜索建议 -->
              <div class="search-help">
                <h4>搜索提示:</h4>
                <ul>
                  <li>尝试使用更通用的关键词</li>
                  <li>检查拼写是否正确</li>
                  <li>使用更少的词语</li>
                  <li>浏览我们的热门产品收藏</li>
                </ul>
              </div>

              <!-- 热门搜索 -->
              <div class="popular-searches">
                <h4>热门搜索:</h4>
                <div class="popular-tags">
                  {%- for tag in shop.metafields.global.popular_searches limit: 8 -%}
                    <a href="/search?q={{ tag | url_param_escape }}" class="popular-tag">{{ tag }}</a>
                  {%- endfor -%}
                </div>
              </div>
            </div>
          </div>
        {%- else -%}
          <!-- 搜索结果列表 -->
          <div class="search-results" data-search-results>
            {%- assign grouped_results = search.results | group_by: 'object_type' -%}
            {%- for group in grouped_results -%}
              {%- assign object_type = group[0] -%}
              {%- assign results = group[1] -%}

              {%- if results.size > 0 -%}
                <div class="search-section" data-search-section="{{ object_type }}">
                  <div class="section-header">
                    <h3 class="section-title">
                      {%- case object_type -%}
                        {%- when 'product' -%}
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"/>
                          </svg>
                          产品 ({{ results.size }})
                        {%- when 'article' -%}
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 4v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5a2 2 0 00-2 2zm3 1h8v10H6V5zm2 2v6h4V7H8z"/>
                          </svg>
                          文章 ({{ results.size }})
                        {%- when 'page' -%}
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 2a2 2 0 00-2 2v12a2 2 0 002 2h14a2 2 0 002-2V4a2 2 0 00-2-2H3zm0 2h14v12H3V4zm2 2v8h10V6H5zm2 2h6v4H7V8z"/>
                          </svg>
                          页面 ({{ results.size }})
                        {%- when 'collection' -%}
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M4 2h12a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2zm1 2v12h10V4H5zm2 2h6v2H7V8zm0 4h6v2H7v-2zm0 4h4v2H7v-2z"/>
                          </svg>
                          收藏 ({{ results.size }})
                      {%- endcase -%}
                    </h3>
                  </div>

                  <div class="section-content">
                    <div class="results-grid">
                      {%- for result in results -%}
                        {%- case object_type -%}
                          {%- when 'product' -%}
                            <div class="search-result-item search-result--product">
                              {% render 'product-card', product: result %}
                            </div>

                          {%- when 'article' -%}
                            <div class="search-result-item search-result--article">
                              {% render 'article-card', article: result %}
                            </div>

                          {%- when 'page' -%}
                            <div class="search-result-item search-result--page">
                              {% render 'page-card', page: result %}
                            </div>

                          {%- when 'collection' -%}
                            <div class="search-result-item search-result--collection">
                              {% render 'collection-card', collection: result %}
                            </div>
                        {%- endcase -%}
                      {%- endfor -%}
                    </div>
                  </div>
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>

          <!-- 分页 -->
          {%- if paginate.pages > 1 -%}
            <div class="search-pagination">
              {% render 'pagination', paginate: paginate %}
            </div>
          {%- endif -%}
        {%- endif -%}
      {%- else -%}
        <!-- 搜索前状态 -->
        <div class="search-prompt">
          <div class="prompt-content">
            <div class="prompt-icon">
              <svg width="64" height="64" viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="24" cy="24" r="16"/>
                <path d="M36 36l20 20"/>
              </svg>
            </div>
            <h3 class="prompt-title">搜索我们的产品</h3>
            <p class="prompt-description">
              在上方搜索框中输入关键词，查找您感兴趣的产品、文章或页面。
            </p>

            <!-- 热门搜索 -->
            <div class="prompt-popular">
              <h4>热门搜索:</h4>
              <div class="popular-tags">
                {%- for tag in shop.metafields.global.popular_searches limit: 6 -%}
                  <a href="/search?q={{ tag | url_param_escape }}" class="popular-tag">{{ tag }}</a>
                {%- endfor -%}
              </div>
            </div>

            <!-- 推荐收藏 -->
            <div class="prompt-collections">
              <h4>热门收藏:</h4>
              <div class="collection-links">
                {%- for collection in collections limit: 4 -%}
                  {%- unless collection.handle == 'frontpage' -%}
                    <a href="{{ collection.url }}" class="collection-link">
                      {%- if collection.featured_image -%}
                        <img src="{{ collection.featured_image | image_url: width: 80, height: 80 }}"
                             alt="{{ collection.title | escape }}"
                             class="collection-link__image">
                      {%- endif -%}
                      <span class="collection-link__title">{{ collection.title }}</span>
                    </a>
                  {%- endunless -%}
                {%- endfor -%}
              </div>
            </div>
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

<style>
/* 搜索页面样式 */
.search-page {
  background: var(--color-bg-primary);
  min-height: 100vh;
}

/* 搜索头部 */
.search-header {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
  color: var(--color-text-inverse);
  padding: var(--spacing-8) 0;
}

.search-header__content {
  max-width: 800px;
  margin: 0 auto;
  text-align: center;
}

.search-title {
  font-family: var(--font-family-heading);
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-6);
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

/* 搜索表单 */
.search-form {
  position: relative;
}

.search-input-wrapper {
  position: relative;
  margin-bottom: var(--spacing-4);
}

.search-input {
  width: 100%;
  padding: var(--spacing-4) var(--spacing-6);
  padding-right: 120px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-full);
  font-size: var(--font-size-lg);
  color: var(--color-text-primary);
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &::placeholder {
    color: var(--color-text-light);
  }

  &:focus {
    outline: none;
    background: white;
    border-color: white;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
  }
}

.search-submit,
.search-clear {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius-full);
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--color-text-inverse);
  }
}

.search-submit {
  right: 50px;
}

.search-clear {
  right: var(--spacing-3);
  display: none;

  &.visible {
    display: flex;
  }
}

.search-options {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-6);
  flex-wrap: wrap;
}

.search-type {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
}

.search-type__label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.search-type__select {
  padding: var(--spacing-2) var(--spacing-3);
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-base);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);

  &:focus {
    outline: none;
    border-color: white;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
  }
}

/* 搜索建议 */
.search-suggestions {
  width: 100%;
  margin-top: var(--spacing-3);
  padding: var(--spacing-4);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.suggestions-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-3);
}

.suggestions-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.suggestions-list li {
  padding: var(--spacing-2) 0;
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &:hover {
    color: var(--color-primary);
    transform: translateX(4px);
  }
}

/* 搜索信息 */
.search-info {
  background: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border-light);
  padding: var(--spacing-4) 0;
}

.search-info__content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-6);
}

.search-results-text {
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-4);
}

.search-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-4);
  flex-wrap: wrap;
}

.toolbar-left,
.toolbar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-4);
}

.toolbar-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  margin-right: var(--spacing-2);
}

.sort-select,
.per-page-select {
  padding: var(--spacing-2) var(--spacing-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  cursor: pointer;

  &:focus {
    outline: none;
    border-color: var(--color-secondary);
    box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.1);
  }
}

/* 搜索内容 */
.search-content {
  padding: var(--spacing-8) 0;
}

/* 搜索前状态 */
.search-prompt {
  padding: var(--spacing-16) 0;
}

.prompt-content {
  max-width: 600px;
  margin: 0 auto;
  text-align: center;
}

.prompt-icon {
  width: 120px;
  height: 120px;
  margin: 0 auto var(--spacing-6);
  color: var(--color-text-light);
}

.prompt-title {
  font-family: var(--font-family-heading);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-3);
}

.prompt-description {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
  margin-bottom: var(--spacing-8);
}

.prompt-popular {
  margin-bottom: var(--spacing-8);
}

.prompt-popular h4,
.prompt-collections h4 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-4);
}

.popular-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-2);
  justify-content: center;
}

.popular-tag {
  padding: var(--spacing-2) var(--spacing-4);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-full);
  color: var(--color-text-primary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &:hover {
    background: var(--color-secondary);
    border-color: var(--color-secondary);
    color: var(--color-text-inverse);
    box-shadow: 0 4px 12px rgba(135, 206, 235, 0.3);
  }
}

.collection-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: var(--spacing-4);
}

.collection-link {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-2);
  text-decoration: none;
  color: var(--color-text-primary);
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &:hover {
    color: var(--color-primary);
    transform: translateY(-4px);
  }
}

.collection-link__image {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: var(--radius-lg);
  border: 2px solid var(--color-border);
}

.collection-link__title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  text-align: center;
}

/* 无结果状态 */
.search-empty {
  padding: var(--spacing-16) 0;
}

.empty-content {
  max-width: 600px;
  margin: 0 auto;
  text-align: center;
}

.empty-icon {
  width: 120px;
  height: 120px;
  margin: 0 auto var(--spacing-6);
  color: var(--color-text-light);
}

.empty-title {
  font-family: var(--font-family-heading);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-3);
}

.empty-description {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
  margin-bottom: var(--spacing-6);
}

.empty-actions {
  display: flex;
  gap: var(--spacing-3);
  justify-content: center;
  margin-bottom: var(--spacing-8);
  flex-wrap: wrap;
}

.search-help {
  margin-bottom: var(--spacing-8);
  padding: var(--spacing-6);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  text-align: left;

  h4 {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-3);
  }

  ul {
    list-style: none;
    margin: 0;
    padding: 0;

    li {
      position: relative;
      padding-left: var(--spacing-4);
      margin-bottom: var(--spacing-2);
      color: var(--color-text-secondary);

      &::before {
        content: '•';
        position: absolute;
        left: 0;
        color: var(--color-secondary);
      }
    }
  }
}

/* 搜索结果 */
.search-results {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-8);
}

.search-section {
  background: var(--color-bg-secondary);
  border-radius: var(--radius-xl);
  overflow: hidden;
  border: 1px solid var(--color-border-light);
}

.section-header {
  padding: var(--spacing-5) var(--spacing-6);
  background: var(--color-bg-tertiary);
  border-bottom: 1px solid var(--color-border-light);
}

.section-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0;

  svg {
    flex-shrink: 0;
    color: var(--color-secondary);
  }
}

.section-content {
  padding: var(--spacing-6);
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--spacing-6);
}

.search-result-item {
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  overflow: hidden;
  border: 1px solid var(--color-border-light);
  transition: all var(--duration-normal) var(--ease-sci-fi);

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    border-color: var(--color-secondary);
  }
}

/* 分页 */
.search-pagination {
  margin-top: var(--spacing-8);
}

/* 响应式设计 */
@media (max-width: 768px) {
  .search-header {
    padding: var(--spacing-6) 0;
  }

  .search-title {
    font-size: var(--font-size-3xl);
  }

  .search-input {
    padding: var(--spacing-3) var(--spacing-4);
    padding-right: 100px;
    font-size: var(--font-size-base);
  }

  .search-submit,
  .search-clear {
    width: 36px;
    height: 36px;
  }

  .search-submit {
    right: 42px;
  }

  .search-clear {
    right: var(--spacing-2);
  }

  .search-options {
    flex-direction: column;
    gap: var(--spacing-3);
  }

  .search-info__content {
    padding: 0 var(--spacing-4);
  }

  .search-toolbar {
    flex-direction: column;
    align-items: stretch;
  }

  .toolbar-left,
  .toolbar-right {
    justify-content: center;
  }

  .results-grid {
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: var(--spacing-4);
  }

  .section-header {
    padding: var(--spacing-4);
  }

  .section-content {
    padding: var(--spacing-4);
  }

  .empty-actions {
    flex-direction: column;
    align-items: center;
  }

  .collection-links {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .search-title {
    font-size: var(--font-size-2xl);
  }

  .results-grid {
    grid-template-columns: 1fr;
  }

  .collection-links {
    grid-template-columns: 1fr;
  }

  .popular-tags {
    justify-content: flex-start;
  }
}

/* 动画 */
.search-result-item {
  animation: fadeInUp 0.6s ease-out backwards;

  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: #{($i - 1) * 0.05}s;
    }
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 减少动画 */
@media (prefers-reduced-motion: reduce) {
  .search-result-item {
    animation: none;
  }

  .search-input,
  .search-submit,
  .search-clear,
  .popular-tag,
  .collection-link {
    transition: none;
  }
}

/* 无障碍支持 */
.search-input:focus-visible,
.search-submit:focus-visible,
.search-clear:focus-visible,
.sort-select:focus-visible,
.per-page-select:focus-visible {
  outline: 2px solid var(--color-secondary);
  outline-offset: 2px;
}

/* 高对比度模式 */
@media (prefers-contrast: high) {
  .search-input {
    border-width: 3px;
  }

  .popular-tag {
    border-width: 2px;
  }
}
</style>