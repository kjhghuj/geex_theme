{%- comment -%}
  è´­ç‰©è½¦é¡µé¢æ¨¡æ¿ - ä¸é¦–é¡µä¸€è‡´çš„è®¾è®¡
  åŒ…å«ï¼šæ¨ªå¹…ã€å¤´éƒ¨ã€å¯¼èˆªã€è´­ç‰©æ­¥éª¤ã€å•†å“å†…å®¹ã€æ”¿ç­–ã€é¡µè„š
{%- endcomment -%}

<!-- ç¡®ä¿åŠ è½½å…±äº«æ ·å¼ - common-styles.cssåŒ…å«æ¨ªå¹…ã€å¤´éƒ¨ã€å¯¼èˆªã€é¡µè„šæ ·å¼ -->
{{ 'common-styles.css' | asset_url | stylesheet_tag }}

<div class="sci-fi-homepage-optimized">

  <!-- é¡¶éƒ¨æ¨ªå¹…æ¨¡å— - ä¸é¦–é¡µä¿æŒä¸€è‡´ -->
  <section class="announcement-bar enhanced" data-section-type="announcement-bar">
    <div class="announcement-content" id="announcementText">
      {% if section.settings.announcement_text != blank %}
        {{ section.settings.announcement_text }}
      {% else %}
        ğŸ‰ é™æ—¶ä¼˜æƒ ï¼šå…¨åœºå•†å“æ»¡299å‡50ï¼Œæ–°ç”¨æˆ·é¦–å•8æŠ˜ä¼˜æƒ ï¼ä¼˜æƒ ç ï¼šSCI-FI-2024
      {% endif %}
    </div>
  </section>

  <!-- å¤´éƒ¨æ¨¡å— - ä¸é¦–é¡µä¿æŒä¸€è‡´ -->
  <header class="main-header enhanced" data-section-type="header">
    <div class="header-container">
      <!-- åº—é“ºLogo -->
      <div class="header-logo">
        <a href="/" class="logo-link">
          <img src="{{ 'logo.png' | asset_url }}"
               alt="{{ shop.name }}"
               class="logo-image">
        </a>
      </div>

      <!-- æœç´¢æ å’Œå…¶ä»–ç»„ä»¶ -->
      <div class="header-actions">
        <!-- æœç´¢æ  -->
        <div class="search-container enhanced">
          <form class="search-form" action="/search" method="get" role="search">
            <input type="search"
                   name="q"
                   class="search-input"
                   placeholder="æœç´¢äº§å“..."
                   value="{{ search.terms | escape }}"
                   aria-label="æœç´¢äº§å“">
            <button type="submit" class="search-button" aria-label="æœç´¢">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </form>
        </div>

        <!-- FAQæŒ‰é’® - å¢å¼ºæ•ˆæœ -->
        <a href="/pages/faq" class="header-btn faq-btn enhanced">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="12" y1="17" x2="12.01" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="btn-text">FAQ</span>
        </a>

        <!-- My AccountæŒ‰é’® - å¢å¼ºæ•ˆæœ -->
        {% if customer %}
          <a href="{{ routes.account_url }}" class="header-btn account-btn enhanced">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="btn-text">{{ customer.first_name | default: 'My Account' }}</span>
          </a>
        {% else %}
          <a href="{{ routes.account_login_url }}" class="header-btn account-btn enhanced">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span class="btn-text">My Account</span>
          </a>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- å¯¼èˆªæ æ¨¡å— - ä¸é¦–é¡µ1:1å¤åˆ» -->
  <nav class="main-navigation sticky-nav" data-section-type="navigation">
    <div class="nav-container">
      <!-- å·¦ä¾§å¯¼èˆªèœå• - å®Œå…¨ä¸é¦–é¡µä¸€è‡´ -->
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="/" class="nav-link">HOME</a>
        </li>
        <li class="nav-item mega-dropdown">
          <a href="/collections/all" class="nav-link">SHOP</a>
          <div class="mega-menu">
            <div class="mega-menu-content">
              <!-- ç”µå­äº§å“ -->
              <div class="mega-category">
                <a href="/collections/electronics" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
                    <line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2"/>
                    <circle cx="6" cy="18" r="1" fill="currentColor"/>
                    <circle cx="18" cy="18" r="1" fill="currentColor"/>
                  </svg>
                  ç”µå­äº§å“
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/smartphones">æ™ºèƒ½æ‰‹æœº</a></li>
                  <li><a href="/collections/laptops">ç¬”è®°æœ¬ç”µè„‘</a></li>
                  <li><a href="/collections/tablets">å¹³æ¿ç”µè„‘</a></li>
                  <li><a href="/collections/headphones">è€³æœºéŸ³å“</a></li>
                  <li><a href="/collections/cameras">æ‘„å½±æ‘„åƒ</a></li>
                </ul>
              </div>

              <!-- æ™ºèƒ½å®¶å±… -->
              <div class="mega-category">
                <a href="/collections/smart-home" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" stroke="currentColor" stroke-width="2"/>
                    <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  æ™ºèƒ½å®¶å±…
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/smart-speakers">æ™ºèƒ½éŸ³ç®±</a></li>
                  <li><a href="/collections/smart-lights">æ™ºèƒ½ç…§æ˜</a></li>
                  <li><a href="/collections/smart-locks">æ™ºèƒ½é—¨é”</a></li>
                  <li><a href="/collections/some-sensors">ä¼ æ„Ÿå™¨</a></li>
                  <li><a href="/collections/home-automation">å®¶å±…æ§åˆ¶</a></li>
                </ul>
              </div>

              <!-- ç©¿æˆ´è®¾å¤‡ -->
              <div class="mega-category">
                <a href="/collections/wearables" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="12" y="2" width="8" height="20" rx="2" stroke="currentColor" stroke-width="2"/>
                    <line x1="14" y1="4" x2="18" y2="4" stroke="currentColor" stroke-width="2"/>
                    <line x1="14" y1="8" x2="18" y2="8" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 18a4 4 0 01-8 0" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  ç©¿æˆ´è®¾å¤‡
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/smartwatches">æ™ºèƒ½æ‰‹è¡¨</a></li>
                  <li><a href="/collections/fitness-trackers">è¿åŠ¨æ‰‹ç¯</a></li>
                  <li><a href="/collections/smart-rings">æ™ºèƒ½æˆ’æŒ‡</a></li>
                  <li><a href="/collections/health-monitors">å¥åº·ç›‘æµ‹</a></li>
                  <li><a href="/collections/ar-glasses">ARçœ¼é•œ</a></li>
                </ul>
              </div>

              <!-- æ¸¸æˆç”µç« -->
              <div class="mega-category">
                <a href="/collections/gaming" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="2" y="6" width="20" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
                    <line x1="6" y1="12" x2="6" y2="12" stroke="currentColor" stroke-width="4"/>
                    <circle cx="18" cy="12" r="2" fill="currentColor"/>
                    <rect x="8" y1="10" width="6" height="4" rx="1" fill="currentColor"/>
                  </svg>
                  æ¸¸æˆç”µç«
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/gaming-consoles">æ¸¸æˆä¸»æœº</a></li>
                  <li><a href="/collections/gaming-pc">æ¸¸æˆç”µè„‘</a></li>
                  <li><a href="/collections/gaming-monitors">ç”µç«æ˜¾ç¤ºå™¨</a></li>
                  <li><a href="/collections/gaming-keyboards">æœºæ¢°é”®ç›˜</a></li>
                  <li><a href="/collections/gaming-mice">æ¸¸æˆé¼ æ ‡</a></li>
                </ul>
              </div>

              <!-- åŠå…¬è®¾å¤‡ -->
              <div class="mega-category">
                <a href="/collections/office" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" stroke="currentColor" stroke-width="2"/>
                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                    <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"/>
                    <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  åŠå…¬è®¾å¤‡
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/printers">æ‰“å°æœº</a></li>
                  <li><a href="/collections/scanners">æ‰«æä»ª</a></li>
                  <li><a href="/collections/projectors">æŠ•å½±ä»ª</a></li>
                  <li><a href="/collections/office-furniture">åŠå…¬å®¶å…·</a></li>
                  <li><a href="/collections/network-equipment">ç½‘ç»œè®¾å¤‡</a></li>
                </ul>
              </div>

              <!-- é…ä»¶å‘¨è¾¹ -->
              <div class="mega-category">
                <a href="/collections/accessories" class="category-title">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="3" fill="currentColor"/>
                  </svg>
                  é…ä»¶å‘¨è¾¹
                </a>
                <ul class="subcategories">
                  <li><a href="/collections/phone-cases">æ‰‹æœºå£³è†œ</a></li>
                  <li><a href="/collections/cables">è¿æ¥çº¿æ</a></li>
                  <li><a href="/collections/chargers">å……ç”µè®¾å¤‡</a></li>
                  <li><a href="/cases/external-storage">å­˜å‚¨è®¾å¤‡</a></li>
                  <li><a href="/cases/car-accessories">è½¦è½½é…ä»¶</a></li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a href="/blogs/news" class="nav-link">BLOG</a>
        </li>
        <li class="nav-item">
          <a href="/pages/about" class="nav-link">ABOUT US</a>
        </li>
      </ul>

      <!-- ç§»é™¤è´­ç‰©è½¦é¡µé¢å¯¼èˆªæ ä¸­çš„è´­ç‰©è½¦æŒ‰é’® - é¿å…é‡å¤ -->
      <!-- è´­ç‰©è½¦é¡µé¢å·²æœ‰å®Œæ•´çš„è´­ç‰©è½¦å†…å®¹ï¼Œå¯¼èˆªæ ä¸éœ€è¦è´­ç‰©è½¦æŒ‰é’® -->
    </div>
  </nav>

  <!-- è´­ç‰©è½¦ä¸»è¦å†…å®¹åŒº -->
  <div class="cart-page-content">
    <div class="content-container">

      <!-- è´­ç‰©æ­¥éª¤æ¨ªå‘éª¨æ¶å›¾ -->
      <div class="checkout-progress">
        <div class="progress-container">
          <div class="progress-step active">
            <div class="step-number">1</div>
            <div class="step-label">Shopping Cart</div>
          </div>
          <div class="progress-connector"></div>
          <div class="progress-step">
            <div class="step-number">2</div>
            <div class="step-label">Shipping & Checkout</div>
          </div>
          <div class="progress-connector"></div>
          <div class="progress-step">
            <div class="step-number">3</div>
            <div class="step-label">Confirmation</div>
          </div>
        </div>
      </div>

      <!-- ç§»é™¤é¡µé¢æ ‡é¢˜æ¨¡å—ï¼Œç®€åŒ–è´­ç‰©è½¦é¡µé¢å¸ƒå±€ -->

      <!-- è´­ç‰©è½¦å†…å®¹ -->
      <div class="cart-main-content">
        {%- if cart.items.size == 0 -%}
          <!-- ç©ºè´­ç‰©è½¦ -->
          <div class="empty-cart">
            <div class="empty-cart-content">
              <div class="empty-cart-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M9 2L3 9v11a2 2 0 002 2h14a2 2 0 002-2V9l-6-7z"/>
                  <line x1="3" y1="9" x2="21" y2="9"/>
                  <path d="M9 22V12h6v10"/>
                </svg>
              </div>
              <h2 class="empty-cart-title">{{ 'cart.general.empty' | t }}</h2>
              <p class="empty-cart-description">{{ 'cart.general.empty_message' | t }}</p>
              <a href="{{ routes.all_products_collection_url }}" class="continue-shopping-btn glow-button primary">
                {{ 'cart.general.continue_shopping' | t }}
              </a>
            </div>
          </div>
        {%- else -%}
          <!-- è´­ç‰©è½¦å•†å“å’Œæ±‡æ€» -->
          <div class="cart-grid">
            <!-- å³ä¾§ï¼šè´­ç‰©è½¦å•†å“åˆ—è¡¨ -->
            <div class="cart-items-section">
              <form action="{{ routes.cart_url }}" method="post" novalidate class="cart-form" id="cart-form">
                <div class="cart-items">
                  {%- for item in cart.items -%}
                    <div class="cart-item-card" data-item-key="{{ item.key }}">
                      <div class="cart-item-image">
                        <a href="{{ item.url }}">
                          {%- if item.image -%}
                            <img src="{{ item.image | image_url: width: 100, height: 100 }}"
                                 srcset="{{ item.image | image_url: width: 100 }} 1x, {{ item.image | image_url: width: 200 }} 2x"
                                 alt="{{ item.image.alt | default: item.product.title | escape }}"
                                 loading="lazy"
                                 class="cart-item-img">
                          {%- else -%}
                            <div class="placeholder-image">{{ item.product.title | slice: 0, 1 }}</div>
                          {%- endif -%}
                        </a>
                      </div>

                      <div class="cart-item-details">
                        <div class="cart-item-header">
                          <h3 class="cart-item-title">
                            <a href="{{ item.url }}">{{ item.product.title }}</a>
                          </h3>
                          <button type="button"
                                  class="remove-item-btn"
                                  data-item-key="{{ item.key }}"
                                  aria-label="{{ 'cart.general.remove' | t }}: {{ item.product.title | escape }}">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                            </svg>
                          </button>
                        </div>

                        <!-- å˜ä½“ä¿¡æ¯ -->
                        {%- unless item.product.has_only_default_variant -%}
                          <div class="cart-item-variants">
                            {%- for option in item.options_with_values -%}
                              <div class="variant-item">
                                <span class="variant-label">{{ option.name }}:</span>
                                <span class="variant-value">{{ option.value }}</span>
                              </div>
                            {%- endfor -%}
                          </div>
                        {%- endunless -%}

                        <!-- æ•°é‡æ§åˆ¶ -->
                        <div class="item-actions">
                          <div class="quantity-control">
                            <button type="button"
                                    class="quantity-btn minus-btn"
                                    name="minus"
                                    aria-label="{{ 'cart.general.reduce_quantity' | t }}">
                              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                                <path d="M2 6a1 1 0 011-1h6a1 1 0 110 2H3a1 1 0 01-1-1z"/>
                              </svg>
                            </button>

                            <input type="number"
                                   name="updates[]"
                                   value="{{ item.quantity }}"
                                   min="0"
                                   class="quantity-input"
                                   aria-label="{{ 'cart.general.quantity' | t }}"
                                   id="updates_{{ item.key }}">

                            <button type="button"
                                    class="quantity-btn plus-btn"
                                    name="plus"
                                    aria-label="{{ 'cart.general.increase_quantity' | t }}">
                              <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                                <path d="M6 2a1 1 0 011 1v2h2a1 1 0 110 2H7v2a1 1 0 11-2 0V7H3a1 1 0 110-2h2V3a1 1 0 011-1z"/>
                              </svg>
                            </button>
                          </div>

                          <div class="item-price-section">
                            <div class="unit-price-label">å•ä»·:</div>
                            <div class="unit-price">
                              {%- if item.original_price != item.final_price -%}
                                <div class="price-row">
                                  <span class="price-original">{{ item.original_price | money }}</span>
                                  <span class="price-current" data-price="{{ item.final_price }}">{{ item.final_price | money }}</span>
                                </div>
                              {%- else -%}
                              <span class="price-current" data-price="{{ item.final_price }}">{{ item.final_price | money }}</span>
                              {%- endif -%}
                            </div>

                            {%- if item.quantity > 1 -%}
                            <div class="total-price-label">æ€»ä»·:</div>
                            <div class="total-price" data-item-total="{{ item.line_price }}">{{ item.line_price | money }}</div>
                            {%- endif -%}
                          </div>
                        </div>
                      </div>

                      <!-- å°è®¡å·²ç§»è‡³ä»·æ ¼åŒºåŸŸ -->
                    </div>
                  {%- endfor -%}
                </div>
              </form>
            </div>

            <!-- å·¦ä¾§ï¼šè´§æ¬¾æ±‡æ€»å¡ç‰‡ -->
            <div class="order-summary-section">
              <div class="order-summary-card">
                <h3 class="summary-title">Order Summary</h3>

                <!-- å…è´¹é…é€æé†’ -->
                {%- if section.settings.show_free_shipping_bar -%}
                  {%- assign freeShippingThreshold = section.settings.free_shipping_threshold | times: 100 -%}
                  <div class="free-shipping-bar">
                    {%- if cart.total_price >= freeShippingThreshold -%}
                      <div class="shipping-success">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                        </svg>
                        <span>{{ 'cart.general.free_shipping_achieved' | t }}</span>
                      </div>
                    {%- else -%}
                      {%- assign remainingAmount = freeShippingThreshold | minus: cart.total_price -%}
                      <div class="shipping-progress">
                        <div class="shipping-info">
                          <span>{{ 'cart.general.free_shipping_progress' | t: amount: remainingAmount }}</span>
                          <div class="shipping-progress-bar">
                            <div class="progress-fill" style="width: {{ cart.total_price | times: 100 | divided_by: free_shipping_threshold }}%"></div>
                          </div>
                        </div>
                      </div>
                    {%- endif -%}
                  </div>
                {%- endif -%}

                <!-- è®¢å•é‡‘é¢æ˜ç»† -->
                <div class="summary-details">
                  <div class="summary-row">
                    <span class="summary-label">{{ 'cart.general.subtotal' | t }}</span>
                    <span class="summary-value">{{ cart.total_price | money }}</span>
                  </div>

                  <!-- è¿è´¹é€‰é¡¹ -->
                  <div class="shipping-options">
                    <span class="summary-label">{{ 'cart.general.shipping' | t }}</span>
                    <div class="shipping-selection">
                      <select class="shipping-select" name="shipping_method">
                        <option value="standard">Standard Delivery (Â¥15.00)</option>
                        <option value="express">Express Delivery (Â¥35.00)</option>
                        <option value="overnight">Overnight Delivery (Â¥65.00)</option>
                      </select>
                    </div>
                  </div>

                  <!-- æŠ˜æ‰£æ€»è®¡ -->
                  {%- if cart.total_discount > 0 -%}
                    <div class="summary-row discount-row">
                      <span class="summary-label">{{ 'cart.general.discount' | t }}</span>
                      <span class="summary-value discount-value">-{{ cart.total_discount | money }}</span>
                    </div>
                  {%- endif -%}

                  <!-- ç¨è´¹ -->
                  {%- if section.settings.show_taxes -%}
                    <div class="summary-row">
                      <span class="summary-label">{{ 'cart.general.taxes' | t }}</span>
                      <span class="summary-value">{{ cart.tax_price | money }}</span>
                    </div>
                  {%- endif -%}
                </div>

                <!-- æ€»è®¡ -->
                <div class="summary-total">
                  <div class="summary-row total-row">
                    <span class="summary-label">{{ 'cart.general.total' | t }}</span>
                    <span class="summary-value total-value">{{ cart.total_price | money }}</span>
                  </div>
                </div>

                <!-- æŠ˜æ‰£ä»£ç  -->
                <div class="discount-section">
                  <div class="discount-form">
                    <input type="text"
                           class="discount-input"
                           placeholder="{{ 'cart.general.discount_placeholder' | t }}"
                           name="discount"
                           value="{{ cart.discount_applications.first.code }}"
                           {% if cart.discount_applications.size > 0 %}readonly{% endif %}>
                    <button type="submit" form="cart-form" class="discount-btn glow-button small">
                      {%- if cart.discount_applications.size > 0 -%}
                        {{ 'cart.general.remove' | t }}
                      {%- else -%}
                        {{ 'cart.general.apply' | t }}
                      {%- endif -%}
                    </button>
                  </div>
                </div>

                <!-- ç»“è´¦æŒ‰é’® -->
                <div class="checkout-actions">
                  <button type="submit" form="cart-form" name="checkout" class="checkout-btn glow-button primary large">
                    {{ 'cart.general.checkout' | t }}
                  </button>

                  {%- if section.settings.show_payment_buttons -%}
                    <div class="additional-checkout-buttons">
                      {{ form | payment_button }}
                    </div>
                  {%- endif -%}

                  <a href="{{ routes.all_products_collection_url }}" class="continue-shopping-link">
                    {{ 'cart.general.continue_shopping' | t }}
                  </a>
                </div>

                <!-- å®‰å…¨ä¿¡æ¯ -->
                <div class="security-info">
                  <div class="security-badges">
                    <div class="security-badge">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                      </svg>
                      <span>{{ 'cart.general.secure_checkout' | t }}</span>
                    </div>
                    <div class="security-badge">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                      <span>{{ 'cart.general.ssl_encrypted' | t }}</span>
                    </div>
                  </div>

                  <!-- æ”¯ä»˜å›¾æ ‡ -->
                  {%- if section.settings.show_payment_icons -%}
                    <div class="payment-icons">
                      {%- for type in shop.enabled_payment_types limit: 4 -%}
                        <span class="payment-icon">
                          {{ type | payment_type_svg_tag: class: 'payment-icon-svg' }}
                        </span>
                      {%- endfor -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>

  <!-- æ”¿ç­–éƒ¨åˆ† - ä¸é¦–é¡µä¿æŒä¸€è‡´ -->
  <div class="policy-section">
    <div class="content-container">
      <div class="policy-grid">
        <div class="policy-item">
          <div class="policy-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="policy-content">
            <h3>æ­£å“ä¿è¯</h3>
            <p>100%æ­£å“ï¼Œæ”¯æŒå®˜æ–¹éªŒè¯ï¼Œå‡ä¸€èµ”å</p>
          </div>
        </div>

        <div class="policy-item">
          <div class="policy-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
              <rect x="1" y="3" width="15" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
              <polygon points="16,8 20,8 23,11 23,16 16,16" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <path d="M8.5,8 L8.5,11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="policy-content">
            <h3>å¿«é€Ÿå‘è´§</h3>
            <p>24å°æ—¶å†…å‘è´§ï¼Œå…¨å›½ä¸»è¦åŸå¸‚æ¬¡æ—¥è¾¾</p>
          </div>
        </div>

        <div class="policy-item">
          <div class="policy-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <polyline points="22,4 12,14.01 9,11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="policy-content">
            <h3>7å¤©æ— ç†ç”±é€€æ¢</h3>
            <p>æ”¯æŒ7å¤©æ— ç†ç”±é€€æ¢ï¼Œè´­ç‰©æ— å¿§</p>
          </div>
        </div>

        <div class="policy-item">
          <div class="policy-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
              <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="policy-content">
            <h3>24/7å®¢æœæ”¯æŒ</h3>
            <p>ä¸“ä¸šå®¢æœå›¢é˜Ÿ24å°æ—¶åœ¨çº¿æœåŠ¡</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- é¡µè„šéƒ¨åˆ† - ä¸é¦–é¡µä¿æŒä¸€è‡´ -->
  <footer class="site-footer">
    <div class="content-container">
      <div class="footer-top">
        <div class="footer-column">
          <div class="footer-logo">
            <h3 class="footer-logo-text scifi-gradient-text">{{ shop.name }}</h3>
            <p class="footer-description">
              ä¸“æ³¨äºæä¾›æœ€æ–°ç§‘æŠ€äº§å“å’Œæ™ºèƒ½è§£å†³æ–¹æ¡ˆï¼Œè®©ç§‘æŠ€æ”¹å˜ç”Ÿæ´»ï¼Œåˆ›æ–°å¼•é¢†æœªæ¥ã€‚
            </p>
          </div>
          <div class="footer-contact">
            <h4>è”ç³»æˆ‘ä»¬</h4>
            <div class="contact-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/>
              </svg>
              <span>å®¢æœçƒ­çº¿ï¼š400-123-4567</span>
            </div>
            <div class="contact-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
              <span>service@scifistore.com</span>
            </div>
          </div>
        </div>

        <div class="footer-column">
          <h4 class="footer-title">Useful Links</h4>
          <ul class="footer-links">
            <li><a href="/pages/about">å…³äºæˆ‘ä»¬</a></li>
            <li><a href="/pages/shipping">é…é€ä¿¡æ¯</a></li>
            <li><a href="/pages/returns">é€€æ¢è´§æ”¿ç­–</a></li>
            <li><a href="/pages/privacy">éšç§æ”¿ç­–</a></li>
            <li><a href="/pages/terms">æœåŠ¡æ¡æ¬¾</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h4 class="footer-title">FAQ</h4>
          <ul class="footer-links">
            <li><a href="/pages/faq#shipping">é…é€æ—¶é—´</a></li>
            <li><a href="/pages/faq#payment">æ”¯ä»˜æ–¹å¼</a></li>
            <li><a href="/pages/faq#warranty">è´¨ä¿æœåŠ¡</a></li>
            <li><a href="/pages/faq#tracking">è®¢å•è¿½è¸ª</a></li>
            <li><a href="/pages/faq#contact">è”ç³»å®¢æœ</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h4 class="footer-title">Join Us</h4>
          <div class="newsletter-form">
            <p>è®¢é˜…è·å–æœ€æ–°äº§å“èµ„è®¯å’Œç‹¬å®¶ä¼˜æƒ </p>
            <form class="newsletter-form-inner" action="/contact#contact_form" method="post" id="contact_form" accept-charset="UTF-8">
              <input type="hidden" name="form_type" value="customer">
              <input type="hidden" name="utf8" value="âœ“">
              <div class="newsletter-input-group">
                <input type="email" name="contact[email]" id="email" placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±" required>
                <button type="submit" class="newsletter-btn glow-button small">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <polyline points="20,6 9,17 4,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  è®¢é˜…
                </button>
              </div>
            </form>
          </div>

          <div class="social-links">
            <h5>å…³æ³¨æˆ‘ä»¬</h5>
            <div class="social-icons">
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                  <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/>
                  <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                </svg>
              </a>
              <a href="#" class="social-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M22.54 6.42a2.78 2.78 0 00-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 00-1.94 2A29 29 0 001 11a29 29 0 00.46 5.58A2.78 2.78 0 003.4 18.6c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 001.94-2A29 29 0 0023 11a29 29 0 00-.46-5.58zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="copyright">
          <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.</p>
        </div>
        <div class="footer-bottom-links">
          <a href="/pages/sitemap">ç½‘ç«™åœ°å›¾</a>
          <a href="/pages/careers">æ‹›è˜ä¿¡æ¯</a>
          <a href="/pages/partners">åˆä½œä¼™ä¼´</a>
        </div>
      </div>
    </div>
  </footer>
</div>

<style>
/* è´­ç‰©è½¦é¡µé¢ç‰¹å®šæ ·å¼ - å…±äº«æ ·å¼å·²é€šè¿‡common-styles.cssåŠ è½½ */
/* ä½¿ç”¨å…¨å±€CSSå˜é‡ï¼Œä¸é‡å¤å®šä¹‰ä»¥é¿å…å†²çª */

/* è´­ç‰©æ­¥éª¤æ¨ªå‘éª¨æ¶å›¾ */
.checkout-progress {
  padding: var(--spacing-8) 0;
  margin-bottom: var(--spacing-6);
}

.progress-container {
  display: flex;
  align-items: center;
  justify-content: center;
  max-width: 60%;
  margin: 0 auto;
  position: relative;
}

.progress-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  z-index: 2;
}

.step-number {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: var(--dark-bg);
  border: 3px solid rgba(255, 255, 255, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: var(--font-size-lg);
  color: var(--primary-color);
  transition: all var(--duration-normal) var(--ease-sci-fi);
  margin-bottom: var(--spacing-2);
}

.progress-step.active .step-number {
  background: var(--secondary-color);
  border-color: var(--secondary-color);
  color: var(--dark-bg);
  box-shadow: 0 0 20px rgba(135, 206, 235, 0.6);
}

.step-label {
  font-size: var(--font-size-base);
  color: var(--primary-color);
  font-weight: var(--font-weight-medium);
  white-space: nowrap;
  opacity: 0.7;
}

.progress-step.active .step-label {
  color: var(--secondary-color);
  font-weight: var(--font-weight-semibold);
  opacity: 1;
}

/* ä¿®å¤ï¼šæ­¥éª¤2å’Œæ­¥éª¤3çš„æ–‡å­—é¢œè‰²æ”¹ä¸ºé»‘è‰² */
.step-label {
  color: #000000 !important; /* å¼ºåˆ¶é»‘è‰²æ–‡å­— */
  font-weight: 600; /* å¢åŠ å­—ä½“ç²—ç»†ä»¥æé«˜å¯è¯»æ€§ */
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.5); /* æ·»åŠ è½»å¾®ç™½è‰²å…‰æ™•ç¡®ä¿å¯è¯»æ€§ */
}

.progress-step.active .step-label {
  color: var(--secondary-color) !important; /* æ´»è·ƒçŠ¶æ€ä»ä¸ºå¤©ç©ºè“ */
  font-weight: var(--font-weight-semibold);
  text-shadow: 0 0 3px rgba(135, 206, 235, 0.8); /* å¢å¼ºå‘å…‰æ•ˆæœ */
}

.progress-connector {
  width: 120px;
  height: 3px;
  background: var(--border-color);
  position: relative;
  z-index: 1;
}

/* ä¿®å¤ï¼šéª¨æ¶é¢œè‰²æ”¹ä¸ºå‘å…‰çš„å¤©è“è‰² */
.progress-connector {
  background: linear-gradient(90deg,
    rgba(135, 206, 235, 0.8) 0%,
    rgba(135, 206, 235, 1) 50%,
    rgba(135, 206, 235, 0.8) 100%
  ) !important;
  height: 3px;
  border-radius: 2px;
  box-shadow: 0 0 8px rgba(135, 206, 235, 0.6),
              0 0 15px rgba(135, 206, 235, 0.4);
  animation: connector-glow 2s ease-in-out infinite alternate;
}

/* éª¨æ¶å‘å…‰åŠ¨ç”» */
@keyframes connector-glow {
  0% {
    box-shadow: 0 0 8px rgba(135, 206, 235, 0.6),
                0 0 15px rgba(135, 206, 235, 0.4);
  }
  100% {
    box-shadow: 0 0 12px rgba(135, 206, 235, 0.8),
                0 0 25px rgba(135, 206, 235, 0.6);
  }
}

/* è´­ç‰©è½¦é¡µé¢å†…å®¹åŒºåŸŸ - ä¸é¦–é¡µä¿æŒä¸€è‡´çš„èƒŒæ™¯ */
.cart-page-content {
  min-height: 60vh;
  padding-bottom: var(--spacing-12);
  /* ç§»é™¤è‡ªå®šä¹‰èƒŒæ™¯ï¼Œä½¿ç”¨ä¸é¦–é¡µä¸€è‡´çš„å…¨å±€èƒŒæ™¯ */
}

/* æ”¿ç­–éƒ¨åˆ† - ä¸é¦–é¡µ1:1å¤åˆ»æ ·å¼ */
.policy-section {
  width: 100%;
  padding: var(--spacing-2xl) 0;
  background: rgba(0, 0, 0, 0.9); /* ä¸é¦–é¡µä¸€è‡´çš„é»‘è‰²åŠé€æ˜èƒŒæ™¯ */
}

.policy-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* æ”¹ä¸ºä¸€è¡Œå››åˆ— */
  gap: var(--spacing-xl);
  text-align: center; /* ä¸é¦–é¡µä¸€è‡´çš„å±…ä¸­å¯¹é½ */
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-4);
}

.policy-item {
  padding: var(--spacing-lg); /* ä¸é¦–é¡µä¸€è‡´çš„padding */
  background: transparent; /* ç§»é™¤è‡ªå®šä¹‰èƒŒæ™¯ */
  border: none; /* ç§»é™¤è‡ªå®šä¹‰è¾¹æ¡† */
  border-radius: 0; /* ç§»é™¤è‡ªå®šä¹‰åœ†è§’ */
  transition: none; /* ç§»é™¤è‡ªå®šä¹‰è¿‡æ¸¡ */
  text-align: center; /* ä¸é¦–é¡µä¸€è‡´å±…ä¸­ */
}

/* ç§»é™¤æ‚¬åœæ•ˆæœï¼Œä¸é¦–é¡µä¿æŒä¸€è‡´ */
.policy-item:hover {
  background: transparent;
  border: none;
  transform: none;
  box-shadow: none;
}

.policy-icon {
  margin-bottom: var(--spacing-md); /* ä¸é¦–é¡µä¸€è‡´çš„å›¾æ ‡ä¸‹è¾¹è· */
  display: inline-block; /* ä¸é¦–é¡µä¸€è‡´çš„æ˜¾ç¤ºæ–¹å¼ */
  color: var(--secondary-color); /* ä¸é¦–é¡µä¸€è‡´çš„å›¾æ ‡é¢œè‰² */
  width: 48px; /* ä¸é¦–é¡µä¸€è‡´çš„å›¾æ ‡å°ºå¯¸ */
  height: 48px;
}

.policy-content h3 {
  font-size: var(--font-size-xl); /* ä¸é¦–é¡µä¸€è‡´çš„æ ‡é¢˜å­—ä½“ */
  font-weight: 600; /* ä¸é¦–é¡µä¸€è‡´çš„å­—ä½“ç²—ç»† */
  margin-bottom: var(--spacing-sm); /* ä¸é¦–é¡µä¸€è‡´çš„æ ‡é¢˜ä¸‹è¾¹è· */
  color: var(--primary-color); /* ä¸é¦–é¡µä¸€è‡´çš„æ ‡é¢˜é¢œè‰² */
  font-family: inherit; /* ä½¿ç”¨é»˜è®¤å­—ä½“æ— */
}

.policy-content p {
  color: var(--text-light); /* ä¸é¦–é¡µä¸€è‡´çš„æè¿°æ–‡å­—é¢œè‰² */
  font-size: var(--font-size-base); /* ä¸é¦–é¡µä¸€è‡´çš„æè¿°å­—ä½“ */
  margin: 0; /* ä¸é¦–é¡µä¸€è‡´çš„è¾¹è· */
  line-height: inherit; /* ä½¿ç”¨é»˜è®¤è¡Œé«˜ */
}

/* å“åº”å¼è®¾è®¡ - 1:1å¤åˆ»é¦–é¡µçš„å“åº”å¼é€»è¾‘ */
@media (max-width: 1024px) {
  .policy-grid {
    grid-template-columns: repeat(2, 1fr); /* å¹³æ¿ç«¯2åˆ— */
    gap: var(--spacing-lg);
  }
}

@media (max-width: 768px) {
  .policy-grid {
    grid-template-columns: 1fr; /* ç§»åŠ¨ç«¯1åˆ— */
    gap: var(--spacing-lg);
  }
}

.page-title-section {
  text-align: center;
  margin-bottom: var(--spacing-10);
}

.page-title {
  font-family: var(--font-family-heading);
  font-size: var(--font-size-4xl);
  font-weight: var(--font-weight-bold);
  background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: var(--spacing-4);
  animation: glow 2s ease-in-out infinite alternate;
}

.page-subtitle {
  font-size: var(--font-size-lg);
  color: var(--primary-color);
  opacity: 0.8;
  margin: 0;
}

@keyframes glow {
  from { text-shadow: 0 0 20px rgba(135, 206, 235, 0.5); }
  to { text-shadow: 0 0 30px rgba(135, 206, 235, 0.8); }
}

/* è´­ç‰©è½¦ç½‘æ ¼å¸ƒå±€ - å•†å“åˆ—è¡¨60% + è®¢å•æ±‡æ€»40% */
.cart-main-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-4);
}

.cart-grid {
  display: grid;
  grid-template-columns: 60% 40%; /* å•†å“åˆ—è¡¨60%ï¼Œè®¢å•æ±‡æ€»40% */
  gap: var(--spacing-8);
  margin-bottom: var(--spacing-12);
}

/* è´­ç‰©è½¦å•†å“åˆ—è¡¨ - å·¦ä¾§60% */
.cart-items-section {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-xl);
  padding: var(--spacing-8);
  backdrop-filter: blur(15px);
  border: 2px solid rgba(135, 206, 235, 0.3);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4),
              0 0 20px rgba(135, 206, 235, 0.1);
}

/* è®¢å•æ±‡æ€»å¡ç‰‡ - å³ä¾§40% */
.order-summary-section {
  position: sticky;
  top: var(--spacing-8);
  height: fit-content;
}

.order-summary-card {
  background: rgba(255, 255, 255, 0.08);
  border-radius: var(--radius-xl);
  padding: var(--spacing-8);
  backdrop-filter: blur(15px);
  border: 2px solid rgba(135, 206, 235, 0.3);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4),
              0 0 20px rgba(135, 206, 235, 0.1);
}

.summary-title {
  font-family: var(--font-family-heading);
  font-size: clamp(1.5rem, 4vw, 2rem); /* æ›´å¤§çš„å­—ä½“ï¼Œå“åº”å¼ */
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-8);
  color: #FFFFFF; /* çº¯ç™½è‰²æ–‡å­—ï¼Œç¡®ä¿ä¸èƒŒæ™¯å¯¹æ¯” */
  text-align: center;
  text-shadow: 0 0 10px rgba(135, 206, 235, 0.5); /* è“è‰²å‘å…‰æ•ˆæœ */
  letter-spacing: 0.5px;
}

.cart-items {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-4);
  max-height: 600px;
  overflow-y: auto;
  padding-right: var(--spacing-2);
}

.cart-items::-webkit-scrollbar {
  width: 6px;
}

.cart-items::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-full);
}

.cart-items::-webkit-scrollbar-thumb {
  background: var(--primary-color);
  border-radius: var(--radius-full);
}

/* è´­ç‰©è½¦å•†å“å¡ç‰‡ */
.cart-item-card {
  display: grid;
  grid-template-columns: 100px 1fr auto;
  gap: var(--spacing-4);
  padding: var(--spacing-4);
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all var(--duration-normal) var(--ease-sci-fi);
}

.cart-item-card:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--primary-color);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(135, 206, 235, 0.2);
}

.cart-item-image {
  width: 100px;
  height: 100px;
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.cart-item-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--duration-slow) var(--ease-sci-fi);
}

.cart-item-card:hover .cart-item-img {
  transform: scale(1.05);
}

.placeholder-image {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-2xl);
  background: rgba(135, 206, 235, 0.1);
  color: var(--primary-color);
}

.cart-item-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
}

.cart-item-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.cart-item-title {
  font-size: clamp(1.125rem, 3vw, 1.375rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  font-weight: var(--font-weight-bold);
  margin: 0;
  line-height: var(--line-height-tight);
}

.cart-item-title a {
  color: #000000; /* é»‘è‰²æ–‡å­—ï¼Œç¡®ä¿æ¸…æ™°å¯è¯» */
  text-decoration: none;
  transition: all var(--duration-normal) var(--ease-sci-fi);
  text-shadow: 0 0 2px rgba(255, 255, 255, 0.8); /* è½»å¾®ç™½è‰²å…‰æ™•ç¡®ä¿åœ¨æ·±è‰²èƒŒæ™¯ä¸Šå¯è§ */
}

.cart-item-title a:hover {
  color: var(--secondary-color); /* æ‚¬åœæ—¶å˜ä¸ºå¤©ç©ºè“ */
  text-shadow: 0 0 10px rgba(135, 206, 235, 0.8);
  transform: translateY(-1px);
}

.remove-item-btn {
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  padding: var(--spacing-1);
  border-radius: var(--radius-base);
  transition: all var(--duration-normal) var(--ease-sci-fi);
}

.remove-item-btn:hover {
  background: rgba(255, 67, 54, 0.2);
  color: #ff4336;
  transform: scale(1.1);
}

.cart-item-variants {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
  font-size: clamp(0.875rem, 2vw, 1rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  margin-top: var(--spacing-2);
}

.variant-item {
  display: flex;
  gap: var(--spacing-3);
  background: rgba(255, 255, 255, 0.03);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  font-size: clamp(0.875rem, 2vw, 1rem);
}

.variant-label {
  color: #B0B0B0; /* æµ…ç°è‰²æ ‡ç­¾ */
  font-weight: var(--font-weight-semibold);
  font-size: clamp(0.8rem, 2vw, 0.9rem);
  text-shadow: 0 0 2px rgba(135, 206, 235, 0.2);
}

.variant-value {
  color: #E0E0E0; /* æµ…ç°è‰²å€¼ */
  font-weight: var(--font-weight-medium);
  font-size: clamp(0.875rem, 2vw, 1rem);
  background: rgba(135, 206, 235, 0.1);
  padding: 2px 6px;
  border-radius: var(--radius-xs);
  text-shadow: 0 0 1px rgba(135, 206, 235, 0.4);
}

.item-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-3);
}

.quantity-control {
  display: flex;
  align-items: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-base);
  background: rgba(255, 255, 255, 0.05);
}

.quantity-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-sci-fi);
}

.quantity-btn:hover {
  background: var(--primary-color);
  color: var(--bg-dark);
}

.quantity-input {
  width: 40px;
  height: 28px;
  text-align: center;
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.item-price-section {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: var(--spacing-2);
  margin-left: var(--spacing-4);
}

.unit-price-label, .total-price-label {
  font-size: clamp(0.75rem, 1.5vw, 0.875rem);
  color: #666666;
  font-weight: var(--font-weight-medium);
  margin-bottom: 2px;
  text-align: right;
}

.unit-price, .total-price {
  text-align: right;
}

.item-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--spacing-3);
}

.price-row {
  display: flex;
  gap: var(--spacing-2);
  align-items: center;
}

.price-original {
  font-size: clamp(0.875rem, 2vw, 1rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  color: #999999; /* ä¸­ç­‰ç°è‰²ï¼Œç¡®ä¿å¯è§æ€§ */
  text-decoration: line-through;
  font-weight: var(--font-weight-medium);
}

.price-current {
  font-size: clamp(1rem, 2.5vw, 1.25rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  font-weight: var(--font-weight-bold);
  color: #003d7a; /* æ·±è“è‰²æ–‡å­— */
  text-shadow: 0 0 3px rgba(0, 61, 122, 0.4); /* æ·±è“è‰²å‘å…‰æ•ˆæœ */
}

.item-quantity {
  font-size: clamp(0.875rem, 2vw, 1rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  color: #B0B0B0; /* æµ…ç°è‰²æ–‡å­— */
  font-weight: var(--font-weight-medium);
  background: rgba(135, 206, 235, 0.1);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
}

.item-total {
  display: flex;
  align-items: center;
  justify-content: center;
}

.total-price {
  font-family: var(--font-family-heading);
  font-size: clamp(1.25rem, 3.5vw, 1.5rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  font-weight: var(--font-weight-bold);
  color: #002966; /* æ›´æ·±çš„è“è‰²æ–‡å­— */
  text-shadow: 0 0 8px rgba(0, 41, 102, 0.6); /* æ·±è“è‰²å‘å…‰æ•ˆæœ */
  letter-spacing: 0.5px;
  background: rgba(135, 206, 235, 0.05);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(0, 61, 122, 0.3);
}

/* ç©ºè´­ç‰©è½¦ */
.empty-cart {
  padding: var(--spacing-20) 0;
  text-align: center;
}

.empty-cart-content {
  max-width: 500px;
  margin: 0 auto;
}

.empty-cart-icon {
  width: 120px;
  height: 120px;
  margin: 0 auto var(--spacing-6);
  color: var(--primary-color);
  opacity: 0.6;
}

.empty-cart-title {
  font-family: var(--font-family-heading);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--spacing-4);
  color: var(--text-primary);
}

.empty-cart-description {
  font-size: var(--font-size-base);
  color: var(--text-secondary);
  margin-bottom: var(--spacing-8);
  line-height: var(--line-height-relaxed);
}

/* è®¢å•æ‘˜è¦æ ·å¼ - å®Œæ•´å®ç° */
.free-shipping-bar {
  margin-bottom: var(--spacing-6);
}

.shipping-success {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  padding: var(--spacing-3);
  background: rgba(40, 167, 69, 0.1);
  border: 1px solid rgba(40, 167, 69, 0.2);
  border-radius: var(--radius-base);
  color: var(--color-success);
  font-weight: var(--font-weight-medium);
}

.shipping-progress {
  .shipping-info {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-2);
  }

  .shipping-progress-bar {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-full);
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-success) 0%, #28a745 100%);
    transition: width var(--duration-slow) var(--ease-out);
  }
}

.summary-details {
  margin-bottom: var(--spacing-6);
}

.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-4) 0;
  font-size: clamp(1rem, 2.5vw, 1.125rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
}

.summary-label {
  color: #E0E0E0; /* æµ…ç°è‰²æ–‡å­—ï¼Œç¡®ä¿ä¸èƒŒæ™¯å¯¹æ¯” */
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.3px;
}

.summary-value {
  color: #FFFFFF; /* çº¯ç™½è‰²æ–‡å­— */
  font-weight: var(--font-weight-semibold);
  text-shadow: 0 0 3px rgba(135, 206, 235, 0.4); /* è“è‰²å‘å…‰æ•ˆæœ */
}

.discount-row .summary-value {
  color: #4CAF50; /* ç»¿è‰²æ–‡å­—ï¼Œçªå‡ºæŠ˜æ‰£ */
  font-weight: var(--font-weight-bold);
  text-shadow: 0 0 5px rgba(76, 175, 80, 0.6);
}

.summary-total {
  margin-bottom: var(--spacing-8);
  margin-top: var(--spacing-6);
}

.total-row {
  padding-top: var(--spacing-6);
  border-top: 2px solid rgba(135, 206, 235, 0.4);
  margin-top: var(--spacing-6);
  background: rgba(135, 206, 235, 0.05);
  border-radius: var(--radius-lg);
  padding: var(--spacing-6);
  backdrop-filter: blur(5px);
}

.total-row .summary-label {
  font-size: clamp(1.25rem, 3vw, 1.5rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  font-weight: var(--font-weight-bold);
  color: var(--secondary-color); /* å¤©ç©ºè“è‰²æ ‡ç­¾ */
  text-shadow: 0 0 8px rgba(135, 206, 235, 0.8);
  letter-spacing: 0.5px;
}

.total-value {
  font-family: var(--font-family-heading);
  font-size: clamp(1.5rem, 4vw, 2rem); /* æ›´å¤§çš„å“åº”å¼å­—ä½“ */
  font-weight: var(--font-weight-bold);
  color: #FFFFFF; /* çº¯ç™½è‰²æ–‡å­— */
  text-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
              0 0 25px rgba(135, 206, 235, 0.6);
  letter-spacing: 1px;
}

.discount-section {
  margin-bottom: var(--spacing-6);
}

.discount-form {
  display: flex;
  gap: var(--spacing-2);
}

.discount-input {
  flex: 1;
  padding: var(--spacing-3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-base);
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  transition: border-color var(--duration-normal) var(--ease-sci-fi);

  &:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(135, 206, 235, 0.3);
  }

  &:read-only {
    background: rgba(255, 255, 255, 0.02);
    color: var(--text-secondary);
  }
}

.discount-btn {
  padding: var(--spacing-3) var(--spacing-4);
  white-space: nowrap;
  font-size: var(--font-size-sm);
}

.checkout-actions {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3);
  margin-bottom: var(--spacing-6);
}

.checkout-btn {
  width: 100%;
  padding: var(--spacing-4);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  text-align: center;
}

.additional-checkout-buttons {
  margin-top: var(--spacing-3);
}

.continue-shopping-link {
  display: block;
  text-align: center;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: var(--font-size-sm);
  transition: color var(--duration-normal) var(--ease-sci-fi);
}

.continue-shopping-link:hover {
  color: var(--primary-color);
}

.security-info {
  text-align: center;
}

.security-badges {
  display: flex;
  justify-content: center;
  gap: var(--spacing-4);
  margin-bottom: var(--spacing-4);
}

.security-badge {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}

.payment-icons {
  display: flex;
  justify-content: center;
  gap: var(--spacing-3);
}

.payment-icon {
  opacity: 0.5;
  transition: opacity var(--duration-normal) var(--ease-out);
}

.payment-icon:hover {
  opacity: 1;
}

.payment-icon-svg {
  width: 32px;
  height: auto;
}

/* Glow Buttonæ ·å¼ - å·²åœ¨common-styles.cssä¸­å®šä¹‰ */

/* è¿è´¹é€‰é¡¹ */
.shipping-options {
  padding: var(--spacing-3) 0;
}

.shipping-selection {
  margin-top: var(--spacing-1);
}

.shipping-select {
  width: 100%;
  padding: var(--spacing-2);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-base);
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  transition: border-color var(--duration-normal) var(--ease-sci-fi);
}

.shipping-select:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(135, 206, 235, 0.3);
}

.shipping-select option {
  background: var(--bg-medium);
  color: var(--text-primary);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1200px) {
  .progress-container {
    max-width: 80%;
  }

  .cart-grid {
    grid-template-columns: 350px 1fr;
    gap: var(--spacing-6);
  }
}

@media (max-width: 768px) {
  .progress-container {
    max-width: 95%;
  }

  .progress-step {
    flex: 1;
  }

  .step-number {
    width: 40px;
    height: 40px;
    font-size: var(--font-size-base);
  }

  .step-label {
    font-size: var(--font-size-sm);
  }

  .progress-connector {
    width: 60px;
  }

  .cart-grid {
    grid-template-columns: 1fr;
    gap: var(--spacing-6);
  }

  .order-summary-section {
    position: static;
  }

  .cart-item-card {
    grid-template-columns: 80px 1fr;
    gap: var(--spacing-3);
  }

  .cart-item-image {
    width: 80px;
    height: 80px;
  }

  .item-actions {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-2);
  }

  .quantity-control {
    order: 2;
  }

  .item-price {
    order: 1;
    align-items: flex-start;
  }

  .item-total {
    grid-column: 1 / -1;
    justify-content: flex-start;
  }
}

@media (max-width: 480px) {
  .cart-item-header {
    flex-direction: column;
    gap: var(--spacing-2);
    align-items: flex-start;
  }

  .remove-item-btn {
    align-self: flex-end;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // æ•°é‡æ§åˆ¶ - ä¿®å¤åçš„é€»è¾‘
  const quantityInputs = document.querySelectorAll('.quantity-input');
  const minusBtns = document.querySelectorAll('.minus-btn');
  const plusBtns = document.querySelectorAll('.plus-btn');
  const removeBtns = document.querySelectorAll('.remove-item-btn');

  // æ‰‹åŠ¨è¾“å…¥æ•°é‡éªŒè¯
  quantityInputs.forEach(input => {
    input.addEventListener('change', (e) => {
      let value = parseInt(e.target.value);

      if (isNaN(value) || value < 0) {
        e.target.value = 1;
        value = 1;
      }

      if (value > 99) {
        e.target.value = 99;
        value = 99;
      }

      // å¦‚æœè¾“å…¥ä¸º0ï¼Œè¯¢é—®æ˜¯å¦åˆ é™¤
      if (value === 0) {
        if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')) {
          e.target.value = 1;
          return;
        }
        // å¦‚æœç¡®è®¤åˆ é™¤ï¼Œåˆ™æ›´æ–°å•†å“æ˜¾ç¤º
        updateCartItemDisplay(e.target, 0);
      } else {
        // æ›´æ–°å•†å“æ˜¾ç¤º
        updateCartItemDisplay(e.target, value);
      }
    });
  });

  // å‡å°‘æ•°é‡æŒ‰é’® - ä¿®å¤ååªæ§åˆ¶æ•°é‡ï¼Œå½“ä¸º0æ—¶è¯¢é—®åˆ é™¤
  minusBtns.forEach((btn, index) => {
    btn.addEventListener('click', (e) => {
      // é˜»æ­¢äº‹ä»¶å†’æ³¡
      e.preventDefault();
      e.stopPropagation();

      const input = quantityInputs[index];
      let value = parseInt(input.value);

      if (value > 0) {
        value = value - 1;
        input.value = value;

        // å¦‚æœå‡å°‘åˆ°0ï¼Œè¯¢é—®æ˜¯å¦åˆ é™¤
        if (value === 0) {
          if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')) {
            input.value = 1; // ç”¨æˆ·å–æ¶ˆåˆ é™¤ï¼Œæ¢å¤æ•°é‡ä¸º1
            return;
          }
          // ç”¨æˆ·ç¡®è®¤åˆ é™¤ï¼Œæ›´æ–°æ˜¾ç¤º
          updateCartItemDisplay(input, 0);
        } else {
          // æ›´æ–°å•†å“æ˜¾ç¤º
          updateCartItemDisplay(input, value);
        }
      }
    });
  });

  // å¢åŠ æ•°é‡æŒ‰é’®
  plusBtns.forEach((btn, index) => {
    btn.addEventListener('click', (e) => {
      // é˜»æ­¢äº‹ä»¶å†’æ³¡
      e.preventDefault();
      e.stopPropagation();

      const input = quantityInputs[index];
      let value = parseInt(input.value);

      if (value < 99) {
        value = value + 1;
        input.value = value;

        // æ›´æ–°å•†å“æ˜¾ç¤º
        updateCartItemDisplay(input, value);
      }
    });
  });

  // æ›´æ–°å•†å“æ˜¾ç¤ºçš„å‡½æ•°
  function updateCartItemDisplay(input, quantity) {
    const cartItem = input.closest('.cart-item-card');
    const unitPriceElement = cartItem.querySelector('.price-current');
    const totalPriceElement = cartItem.querySelector('.total-price');
    const totalPriceLabel = cartItem.querySelector('.total-price-label');

    // è·å–å•ä»· - ä¼˜å…ˆä½¿ç”¨dataå±æ€§
    let unitPrice = 0;

    if (unitPriceElement && unitPriceElement.dataset.price) {
      // ä¼˜å…ˆä½¿ç”¨dataå±æ€§ä¸­çš„ä»·æ ¼ï¼ˆä»¥åˆ†ä¸ºå•ä½ï¼‰
      unitPrice = parseFloat(unitPriceElement.dataset.price) / 100;
    } else {
      // å›é€€åˆ°æ–‡æœ¬è§£æ
      if (unitPriceElement) {
        const priceText = unitPriceElement.textContent.trim();
        // æ›´å®Œæ•´çš„è´§å¸ç¬¦å·æ¸…ç†ï¼ŒåŒ…æ‹¬äººæ°‘å¸ç¬¦å·
        unitPrice = parseFloat(priceText.replace(/[Â¥$ï¿¥,\s]/g, ''));
      }
    }

    // æ£€æŸ¥ä»·æ ¼æ˜¯å¦æœ‰æ•ˆ
    if (isNaN(unitPrice) || unitPrice <= 0) {
      console.warn('Invalid unit price detected:', unitPrice, 'from element:', unitPriceElement);
      return;
    }

    // æ›´æ–°æ€»ä»·æ˜¾ç¤º
    if (quantity > 1) {
      // æ˜¾ç¤ºæ€»ä»·åŒºåŸŸ
      if (totalPriceLabel) totalPriceLabel.style.display = 'block';
      if (totalPriceElement) {
        totalPriceElement.style.display = 'block';
        const totalPrice = unitPrice * quantity;
        totalPriceElement.textContent = `Â¥${totalPrice.toFixed(2)}`;
      }
    } else {
      // éšè—æ€»ä»·åŒºåŸŸï¼ˆæ•°é‡ä¸º1æ—¶ï¼‰
      if (totalPriceLabel) totalPriceLabel.style.display = 'none';
      if (totalPriceElement) totalPriceElement.style.display = 'none';
    }

    // å¦‚æœæ•°é‡ä¸º0ï¼Œå‡†å¤‡åˆ é™¤å•†å“
    if (quantity === 0) {
      setTimeout(() => {
        // æäº¤è¡¨å•è¿›è¡Œå®é™…åˆ é™¤
        submitCartUpdate(input);
      }, 1000); // ç»™ç”¨æˆ·1ç§’é’Ÿçœ‹åˆ°å˜åŒ–
    }
  }

  // æäº¤è´­ç‰©è½¦æ›´æ–°çš„å‡½æ•°
  function submitCartUpdate(input) {
    const form = document.createElement('form');
    form.method = 'post';
    form.action = '/cart/update.js';

    const formData = new FormData();
    const itemKey = input.closest('.cart-item-card').dataset.itemKey;
    formData.append('updates[' + itemKey + ']', input.value);

    for (let [key, value] of formData.entries()) {
      form.appendChild(Object.assign(document.createElement('input'), {type: 'hidden', name: key, value: value}));
    }

    document.body.appendChild(form);
    form.submit();
  }

  // ç›´æ¥åˆ é™¤æŒ‰é’®ï¼ˆä¿ç•™åŸæœ‰çš„åˆ é™¤åŠŸèƒ½ï¼Œä½†æ”¹è¿›é€»è¾‘ï¼‰
  removeBtns.forEach(btn => {
    btn.addEventListener('click', async (e) => {
      // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé˜²æ­¢è§¦å‘çˆ¶å…ƒç´ äº‹ä»¶
      e.preventDefault();
      e.stopPropagation();

      const card = btn.closest('.cart-item-card');
      const itemKey = card.dataset.itemKey;

      // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
      if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•†å“å—ï¼Ÿ')) {
        return;
      }

      card.style.opacity = '0.5';

      try {
        // ç›´æ¥åˆ é™¤å•†å“
        const form = document.createElement('form');
        form.method = 'post';
        form.action = '/cart/change.js';

        const formData = new FormData();
        formData.append('line', itemKey);
        formData.append('quantity', 0);

        for (let [key, value] of formData.entries()) {
          form.appendChild(Object.assign(document.createElement('input'), {type: 'hidden', name: key, value: value}));
        }

        document.body.appendChild(form);
        form.submit();
      } catch (error) {
        console.error('Remove item error:', error);
        card.style.opacity = '1';
      }
    });
  });

  // åˆå§‹åŒ–é¡µé¢æ—¶æ ¹æ®æ•°é‡æ˜¾ç¤ºæ€»ä»·
  quantityInputs.forEach(input => {
    const quantity = parseInt(input.value);
    updateCartItemDisplay(input, quantity);
  });
});
</script>